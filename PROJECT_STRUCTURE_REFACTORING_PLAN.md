# é¡¹ç›®ç»“æ„æ•´ç†æ–¹æ¡ˆ

## ğŸ” **å½“å‰é—®é¢˜åˆ†æ**

### å­˜åœ¨çš„æ··ä¹±ï¼š

```
monarch/
â”œâ”€â”€ app/                          # Next.js App Router é¡µé¢
â”‚   â”œâ”€â”€ markets/
â”‚   â”‚   â””â”€â”€ components/           # âŒ é¡µé¢çº§ç»„ä»¶
â”‚   â”œâ”€â”€ positions/
â”‚   â”‚   â””â”€â”€ components/           # âŒ é¡µé¢çº§ç»„ä»¶
â”‚   â””â”€â”€ ...
â””â”€â”€ src/                          # ä¼ ç»Ÿç»“æ„
    â”œâ”€â”€ components/               # âœ… å…¨å±€å…±äº«ç»„ä»¶
    â”œâ”€â”€ hooks/                    # âœ… å…¨å±€ hooks
    â”œâ”€â”€ utils/                    # âœ… å·¥å…·å‡½æ•°
    â””â”€â”€ ...
```

### å¯¼è‡´çš„é—®é¢˜ï¼š

1. **å¯¼å…¥è·¯å¾„æ··ä¹±ï¼š**
   ```tsx
   // æ¥è‡ª src
   import { Button } from '@/components/common';

   // æ¥è‡ª app
   import MarketSettingsModal from 'app/markets/components/MarketSettingsModal';
   ```

2. **ç»„ä»¶èŒè´£ä¸æ¸…ï¼š**
   - ä¸æ¸…æ¥šå“ªäº›ç»„ä»¶è¯¥æ”¾ `/src/components`
   - ä¸æ¸…æ¥šå“ªäº›ç»„ä»¶è¯¥æ”¾ `/app/*/components`

3. **ä»£ç é‡å¤é£é™©ï¼š**
   - ç›¸ä¼¼çš„ç»„ä»¶å¯èƒ½åœ¨ä¸¤ä¸ªåœ°æ–¹éƒ½æœ‰

---

## ğŸ“‹ **æ–¹æ¡ˆ 1ï¼šå®Œå…¨è¿ç§»åˆ° `/app` ç»“æ„ï¼ˆæ¨èï¼‰**

### âœ… ä¼˜ç‚¹ï¼š
- ç¬¦åˆ Next.js 13+ App Router æœ€ä½³å®è·µ
- ç»“æ„æ¸…æ™°ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
- æ›´å¥½çš„ä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½
- å‡å°‘å¯¼å…¥è·¯å¾„æ··ä¹±

### ğŸ“ æ–°ç»“æ„ï¼š

```
app/
â”œâ”€â”€ (routes)/                      # è·¯ç”±ç»„
â”‚   â”œâ”€â”€ markets/
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ _components/           # ç§æœ‰ç»„ä»¶ï¼ˆä¸‹åˆ’çº¿è¡¨ç¤ºä¸æ˜¯è·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ positions/
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ _components/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ _components/                   # å…¨å±€å…±äº«ç»„ä»¶ï¼ˆåŸ src/componentsï¼‰
â”‚   â”œâ”€â”€ ui/                        # é€šç”¨ UI ç»„ä»¶
â”‚   â”œâ”€â”€ market/                    # Market ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                    # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ _hooks/                        # å…¨å±€ hooksï¼ˆåŸ src/hooksï¼‰
â”œâ”€â”€ _utils/                        # å·¥å…·å‡½æ•°ï¼ˆåŸ src/utilsï¼‰
â”œâ”€â”€ _lib/                          # ç¬¬ä¸‰æ–¹åº“é…ç½®
â”‚   â”œâ”€â”€ constants/                 # å¸¸é‡
â”‚   â”œâ”€â”€ services/                  # API æœåŠ¡
â”‚   â”œâ”€â”€ store/                     # Zustand stores
â”‚   â””â”€â”€ types/                     # TypeScript ç±»å‹
â”œâ”€â”€ _config/                       # é…ç½®æ–‡ä»¶
â”œâ”€â”€ api/                           # API è·¯ç”±
â”œâ”€â”€ layout.tsx
â””â”€â”€ page.tsx
```

### ğŸ”§ å®æ–½æ­¥éª¤ï¼š

```bash
# 1. ç§»åŠ¨å…±äº«ä»£ç åˆ° app/_components
mv src/components/* app/_components/

# 2. ç§»åŠ¨ hooks
mv src/hooks/* app/_hooks/

# 3. ç§»åŠ¨ utils
mv src/utils/* app/_utils/

# 4. ç§»åŠ¨å…¶ä»–å…±äº«ä»£ç 
mv src/store app/_lib/store
mv src/constants app/_lib/constants
mv src/types app/_lib/types
mv src/services app/_lib/services

# 5. é‡å‘½åé¡µé¢çº§ç»„ä»¶ç›®å½•
# app/markets/components â†’ app/markets/_components
# (ä¸‹åˆ’çº¿è¡¨ç¤ºè¿™ä¸æ˜¯è·¯ç”±)

# 6. æ›´æ–° tsconfig.json çš„è·¯å¾„æ˜ å°„
# "@/components/*" â†’ "app/_components/*"
# "@/hooks/*" â†’ "app/_hooks/*"
# "@/utils/*" â†’ "app/_utils/*"

# 7. åˆ é™¤ç©ºçš„ src ç›®å½•
rm -rf src/
```

### ğŸ“¦ ä¼˜åŒ–åçš„å¯¼å…¥ï¼š

```tsx
// ç»Ÿä¸€çš„å¯¼å…¥è·¯å¾„
import { Button } from '@/components/ui/Button';
import { useMarkets } from '@/hooks/useMarkets';
import { formatBalance } from '@/utils/balance';
import { marketTableStore } from '@/lib/store/marketTableStore';
```

---

## ğŸ“‹ **æ–¹æ¡ˆ 2ï¼šå®Œå…¨è¿ç§»åˆ° `/src` ç»“æ„**

### âœ… ä¼˜ç‚¹ï¼š
- ä¼ ç»Ÿ Next.js é¡¹ç›®ç»“æ„
- æ‰€æœ‰åº”ç”¨ä»£ç é›†ä¸­åœ¨ src
- ä¸å¾ˆå¤šç°æœ‰é¡¹ç›®ä¸€è‡´

### ğŸ“ æ–°ç»“æ„ï¼š

```
src/
â”œâ”€â”€ app/                           # Next.js App Routerï¼ˆåªæ”¾è·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ markets/
â”‚   â”‚   â””â”€â”€ page.tsx               # åªæœ‰ page.tsx
â”‚   â”œâ”€â”€ positions/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components/                    # æ‰€æœ‰ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                        # é€šç”¨ UI
â”‚   â”œâ”€â”€ market/                    # Market åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MarketsTable/
â”‚   â”‚   â”œâ”€â”€ MarketCard/
â”‚   â”‚   â””â”€â”€ MarketSettingsModal/  # â† ä» app/markets ç§»è¿‡æ¥
â”‚   â””â”€â”€ ...
â”œâ”€â”€ hooks/
â”œâ”€â”€ utils/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ constants/
â”‚   â””â”€â”€ types/
â””â”€â”€ config/
```

### ğŸ”§ å®æ–½æ­¥éª¤ï¼š

```bash
# 1. å°† app ç§»åˆ° src å†…
mv app/* src/app/

# 2. ç§»åŠ¨æ‰€æœ‰é¡µé¢çº§ç»„ä»¶åˆ°å¯¹åº”çš„åŠŸèƒ½æ¨¡å—
mv src/app/markets/components/* src/components/market/
mv src/app/positions/components/* src/components/position/

# 3. æ¸…ç† app ç›®å½•ï¼Œåªä¿ç•™ page.tsx
find src/app -type d -name "components" -exec rm -rf {} +

# 4. æ›´æ–° next.config.js
# åˆ é™¤ app ç›®å½•çš„ç‰¹æ®Šé…ç½®
```

---

## ğŸ“‹ **æ–¹æ¡ˆ 3ï¼šæ··åˆç»“æ„ï¼ˆFeature-Firstï¼‰**

### âœ… ä¼˜ç‚¹ï¼š
- æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ä»£ç 
- æ¯ä¸ªåŠŸèƒ½æ¨¡å—è‡ªåŒ…å«
- é€‚åˆå¤§å‹é¡¹ç›®

### ğŸ“ æ–°ç»“æ„ï¼š

```
app/
â”œâ”€â”€ (features)/                    # åŠŸèƒ½æ¨¡å—ç»„
â”‚   â”œâ”€â”€ markets/
â”‚   â”‚   â”œâ”€â”€ _components/          # Markets ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ _hooks/               # Markets ä¸“ç”¨ hooks
â”‚   â”‚   â”œâ”€â”€ _utils/               # Markets ä¸“ç”¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ _store/               # Markets ä¸“ç”¨ store
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ positions/
â”‚   â”‚   â”œâ”€â”€ _components/
â”‚   â”‚   â”œâ”€â”€ _hooks/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ _shared/                       # çœŸæ­£çš„å…¨å±€å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ components/               # è·¨åŠŸèƒ½çš„ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                   # Button, Input ç­‰åŸºç¡€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ layout/               # Header, Footer
â”‚   â”œâ”€â”€ hooks/                    # è·¨åŠŸèƒ½çš„ hooks
â”‚   â”œâ”€â”€ utils/                    # è·¨åŠŸèƒ½çš„å·¥å…·
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ constants/
â”‚       â”œâ”€â”€ types/
â”‚       â””â”€â”€ config/
â”œâ”€â”€ api/
â”œâ”€â”€ layout.tsx
â””â”€â”€ page.tsx
```

### ğŸ¯ ç»„ç»‡åŸåˆ™ï¼š

- **æ¨¡å—å†…ç»„ä»¶** â†’ `app/(features)/markets/_components/`
- **è·¨æ¨¡å—å…±äº«** â†’ `app/_shared/components/`
- **åŸºç¡€ UI ç»„ä»¶** â†’ `app/_shared/components/ui/`

---

## ğŸ¯ **æ¨èæ–¹æ¡ˆå¯¹æ¯”**

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | è¿ç§»éš¾åº¦ | ç»´æŠ¤æ€§ | ç¬¦åˆ Next.js æœ€ä½³å®è·µ |
|------|---------|---------|--------|---------------------|
| **æ–¹æ¡ˆ 1** | ä¸­å¤§å‹é¡¹ç›® | â­â­â­ | â­â­â­â­â­ | âœ… å®Œå…¨ç¬¦åˆ |
| **æ–¹æ¡ˆ 2** | å°å‹é¡¹ç›® | â­â­ | â­â­â­ | âš ï¸ ä¼ ç»Ÿæ–¹å¼ |
| **æ–¹æ¡ˆ 3** | å¤§å‹å¤šæ¨¡å—é¡¹ç›® | â­â­â­â­ | â­â­â­â­â­ | âœ… å®Œå…¨ç¬¦åˆ |

---

## ğŸš€ **æˆ‘çš„å»ºè®®ï¼šæ–¹æ¡ˆ 1**

åŸºäºæ‚¨å½“å‰çš„é¡¹ç›®è§„æ¨¡å’Œç»“æ„ï¼Œæˆ‘æ¨è**æ–¹æ¡ˆ 1**ï¼š

### ä¸ºä»€ä¹ˆï¼Ÿ

1. âœ… **ç¬¦åˆ Next.js 13+ æœ€ä½³å®è·µ**
2. âœ… **æ›´å¥½çš„ä»£ç ç»„ç»‡**ï¼ˆä¸‹åˆ’çº¿å‰ç¼€æ¸…æ™°æ ‡è®°éè·¯ç”±ç›®å½•ï¼‰
3. âœ… **ç»Ÿä¸€çš„å¯¼å…¥è·¯å¾„**ï¼ˆéƒ½ä» `@/` å¼€å§‹ï¼‰
4. âœ… **æ›´å¥½çš„ä»£ç åˆ†å‰²**ï¼ˆNext.js è‡ªåŠ¨ä¼˜åŒ–ï¼‰
5. âœ… **å›¢é˜Ÿåä½œæ›´æ¸…æ™°**ï¼ˆæ–°äººå®¹æ˜“ç†è§£ï¼‰

### ç«‹å³å¼€å§‹ï¼Ÿ

å¦‚æœæ‚¨åŒæ„æ–¹æ¡ˆ 1ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š
1. åˆ›å»ºè¿ç§»è„šæœ¬
2. è‡ªåŠ¨ç§»åŠ¨æ–‡ä»¶
3. æ›´æ–°æ‰€æœ‰å¯¼å…¥è·¯å¾„
4. æ›´æ–° tsconfig.json
5. æµ‹è¯•æ„å»º

éœ€è¦æˆ‘å¼€å§‹æ‰§è¡Œå—ï¼Ÿ ğŸ¯
